
UTest({
    
    'readFiles - directory': function(){
        var dir = new io.Directory('test/'),
            files = dir.readFiles('*.test').files
            ;
        
        assert(files.length > 1);
        eq(hasFile(files, 'dir.test'), true);
        eq(hasFile(files, 'file.test'), true);
        
        
        var all = dir.readFiles('**.test').files;
        
        
        assert(all.length > files.length);
        eq(hasFile(all, 'json.test'), true);
    },
    
    'readFiles - glob': function(){
        var files = io.glob.readFiles('test/*.test');
        assert(files.length > 1);
        eq(hasFile(files, 'dir.test'), true);
        eq(hasFile(files, 'file.test'), true);
    },
    
    'ensure+remove': function(){
        var DIR = 'test/bin/dir/sub/',
            FILENAME = 'test.txt';
            
        io.Directory.ensure(DIR);
        eq_(io.Directory.exists(DIR), true);
        
        new io
            .File(DIR + FILENAME)
            .write('FOO');
        eq_(io.File.read(DIR + FILENAME), 'FOO');
        
        io.Directory.remove(DIR);
        eq_(io.File.exists(DIR + FILENAME), false);
        eq_(io.Directory.exists(DIR), false);
    }
    
});

function hasFile(files, filename) {
    
    return files.some(function(file){
        return file.uri.file === filename;
    });
}
