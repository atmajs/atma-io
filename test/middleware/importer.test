const io = require('../../lib/io.js');

io.File.middleware['importer'] = require('atma-io-middleware-importer');

io
    .File
    .getHookHandler()
    .register(/./, 'read', 'importer');

UTest({
    'read simple'() {

        var source = io
            .File
            .read('test/middleware/data/importer.js');

        has_(source, "'bar'");
        has_(source, "'a'");
        has_(source, "'b'");
    },

    'read with settings'() {
        var source = io
            .File
            .read('test/middleware/data/importer-settings.js');

        has_(source, "'a'");
        has_(source, "'b'");
        has_(source, "'c'");
    },
    'read exports file'() {
        var source = io
            .File
            .read('test/middleware/data/importer-exports.js');

        has_(source, "'a'");
        has_(source, "'b'");
    }
})
