!function(){var d={},j={},n={},o={},O={},a={},k={},l={},F={},S={},f={},p={},D={},h={},P={},s={},v={},_={},M={},b={},H={},i={},C={},c={},x={};!function(){var t={},e={exports:t};t.__esModule=!0;var r=require("atma-class");t.Class=r;var n=global,o=(t.global=n).logger||require("atma-logger");t.logger=o;function i(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.io={},i(S)&&i(e.exports)?Object.assign(S,e.exports):S=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var r=require("atma-utils"),n=S,o=new r.class_Uri(u(process.mainModule.filename)),i=process.platform,s=c(process.cwd());function c(t){return r.class_Uri.combine(u(t),"/")}function u(t){return t.replace(/\\/g,"/")}function a(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.Env={settings:{},cwd:s,applicationDir:new r.class_Uri(o.toDir()),currentDir:new r.class_Uri(s),get newLine(){return Object.defineProperty(this,"newLine",{value:require("os").EOL}),this.newLine},get appdataDir(){var t;switch(i){case"win32":case"win64":t=process.env.APPDATA||process.env.HOME;break;case"darwin":default:t=process.env.HOME}return null==t?(n.logger.error("<io.env> Unknown AppData Dir"),Object.defineProperty(this,"appdataDir",{value:this.applicationDir}),this.applicationDir):(t=new r.class_Uri(c(t)),"darwin"===i&&(t=t.combine("Library/Application Support/")),t=t.combine("."+o.file+"/"),Object.defineProperty(this,"appdataDir",{value:t}),t)}},a(j)&&a(e.exports)?Object.assign(j,e.exports):j=e.exports}(),function(){var n,t={},e={exports:t},o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(s=(i<3?o(s):3<i?o(e,r,s):o(e,r))||s);return 3<i&&s&&Object.defineProperty(e,r,s),s};t.__esModule=!0;var s=require("fs"),c=S,u="change",a={};t.Watcher={watch:function(t,e){a[t]?a[t].on(u,e):!1!==s.existsSync(t)?(a[t]=new r(t),a[t].on(u,e)):c.logger.error("<watcher> File not exists",t)},unwatch:function(t,e){var r=a[t];null!=r?null!=e&&(r.off(u,e),0!==r._listeners.length)||(r.close(),delete a[t]):c.logger.warn("<watcher> No exists",t)}};var r=function(r){function t(t){var e=r.call(this)||this;return e.path=t,e.fswatcher=s.watch(t,e.changed),e}return o(t,r),t.prototype.changed=function(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.reportChange,100)},t.prototype.reportChange=function(){this.trigger(u,this.path)},t.prototype.close=function(){this.fswatcher.close(),this.off(u)},i([c.Class.deco.self],t.prototype,"changed"),i([c.Class.deco.self],t.prototype,"reportChange"),t}(c.Class.EventEmitter);function l(t){return null!=t&&"object"==typeof t&&t.constructor===Object}l(F)&&l(e.exports)?Object.assign(F,e.exports):F=e.exports}(),function(){var n,t={},e={exports:t},r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});t.__esModule=!0;var a=S;function l(t){"/"===t[0]&&(t=t.substring(1));var e,r=t.split("/");e=-1!==t.indexOf("**")?1/0:r.length,r.pop();for(var n=0;n<r.length;n++)-1!==r[n].indexOf("*")&&r.splice(n);return[e,r.length,r.join("/").toLowerCase()]}function f(t){var e="",r=-1,n=t.length;for(t=t.replace(/(\*\*\/){2,}/g,"**/");++r<n;){var o=t[r];switch(o){case"?":e+=".";break;case"*":if("*"===t[r+1]){0===r&&/[\\\/]/.test(t[r+2])&&(e+=".+",r+=2),e+=".+",r++;break}e+="[^/]+";break;case"{":if(~(i=t.indexOf("}",r))){e+="("+t.substring(r+1,i).replace(/,/g,"|")+")",r=i;break}e+=o;break;case"[":var i;if(~(i=t.indexOf("]",r))){e=t.substring(r,i),r=i;break}e+=o;break;default:~"\\^$*+?.()|{}[]".indexOf(o)&&(e+="\\"),e+=o}}return new s(e="^"+e+"$","i")}t.glob_getCalculatedPath=function(t,e){var r=e.indexOf("*"),n=e.lastIndexOf("/",r),o=-1===n?null:e.substring(0,n);if(!n)return t;var i=t.toLowerCase().indexOf(o.toLowerCase());return-1===i?(a.logger.warn("[substring not found]",t,o),t):t.substring(i+o.length)},t.glob_matchPath=function(t,e){return"/"===e[0]&&(e=e.substring(1)),"/"===t[0]&&(t=t.substring(1)),f(t).test(e)},t.glob_parsePatterns=function e(t,r){if(null==t)return null;if(null==r&&(r=[]),Array.isArray(t))return t.forEach(function(t){e(t,r)}),r;if(t instanceof RegExp)return r.push(t),r;if("string"!=typeof t)return a.logger.error("<glob> Unsupported pattern",t),r;var n=t;"/"===n[0]&&(n=n.substring(1));var o=l(n),i=o[0],s=o[1],c=o[2],u=f(n);return u.depth=i,u.rootCount=s,u.root=c,r.push(u),r},t.glob_parseDirs=l,t.glob_toRegExp=f,t.glob_getStrictPath=function(t){var e=t.indexOf("*");return-1===e?(a.logger.error("glob.js [path is not a glob pattern]",t),null):t.substring(0,t.lastIndexOf("/",e)+1)},t.glob_getRelativePath=function(t){var e=t.indexOf("*");return-1===e?(a.logger.error("glob.js [path is not a glob pattern]",t),null):t.substring(t.lastIndexOf("/",e)+1)};var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(RegExp);function o(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.GlobRegExp=s,o(b)&&o(e.exports)?Object.assign(b,e.exports):b=e.exports}(),function(){var t={},e={exports:t};function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.__esModule=!0,t.obj_extend=function(t,e){if(null==t&&(t={}),null==e)return t;for(var r in e)t[r]=e[r];return t},r(i)&&r(e.exports)?Object.assign(i,e.exports):i=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var r=require("fs");function n(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.fs_isDirectory=function(t){try{return r.statSync(t).isDirectory()}catch(t){return!1}},t.fs_getStat=function(t){try{return r.statSync(t)}catch(t){return null}},n(M)&&n(e.exports)?Object.assign(M,e.exports):M=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var n=S,o=require("atma-utils");function i(t){if(!t)return"/";var e=t.lastIndexOf("/");return-1===e?"":t.substring(e+1,-e)}function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.path_getProtocol=function(t){var e=t.indexOf(":");return-1===e||"/"!==t[e+1]||"/"!==t[e+2]?null:t.substring(0,e)},t.path_getUri=function(t,e){"string"!=typeof t&&(t=t.toString()),"/"===t[0]&&(t=t.substring(1));var r=new o.class_Uri(t);return!1===r.isRelative()?r:e?new o.class_Uri(e).combine(r):n.io.env?n.io.env.currentDir.combine(r):new o.class_Uri("file://"+process.cwd()+"/").combine(r)},t.path_combine=function(t,e){return t?e?("/"===e[0]&&(e=e.substring(1)),"/"===t[t.length-1]?t+e:t+"/"+e):t:e},t.path_getDir=i,t.path_isSubDir=function(t,e){var r=i(t);return 0===i(e).toLowerCase().indexOf(r.toLowerCase())},t.path_resolveUri=function(t,e,r){"/"===t[0]&&(e=r,t=t.substring(1));var n=new o.class_Uri(t);return n.isRelative()?new o.class_Uri(e).combine(n):n},t.path_resolveAppUri=function(t,e){if("/"===t[0])return t;if("./"===t.substring(0,2)&&(t=t.substring(2)),!e||"file"===t.substring(0,4))return"/";var r=e.lastIndexOf("/");return(-1===r?"/":e.substring(r+1,-r))+t},t.path_ensureTrailingSlash=function(t){return"/"===t[t.length-1]?t:t+"/"},r(C)&&r(e.exports)?Object.assign(C,e.exports):C=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var w=S,m=require("fs"),c=i,o=M,A=C;function r(t){return o.fs_isDirectory(t)}function u(t,r){m.stat(t,function(t,e){r(t,e&&e.isDirectory())})}function a(t){return""===t||"/"===t||/^[A-Z]:\/?$/i.test(t)}function b(t,e){for(var r=-1,n=e.length;++r<n;)if(e[r].test(t))return!0;return!1}function l(t){if(null==t)return 1/0;for(var e=0,r=t.length,n=-1;++n<r;)e<t[n].depth&&(e=t[n].depth);return e||1/0}function j(t){try{return m.lstatSync(t)}catch(t){return null}}function n(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.dir_ensure=function t(e){if("/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),!1===m.existsSync(e)){var r,n=e.substring(0,e.lastIndexOf("/"));if(!1===a(n)&&(r=t(n)),r)return r.toString();try{m.mkdirSync(e)}catch(t){return t.toString()}}if(!o.fs_isDirectory(e))return"Target exists, but is not a directory:"+e},t.dir_ensureAsync=function n(o,i){function s(){m.mkdir(o,function(t){t&&47===t.errno&&(t=null),i(t)})}u(o=o.replace(/\/*$/,""),function(t,e){if(e)return i();var r=o.substring(0,o.lastIndexOf("/"));!1===a(r)?n(r,s):s()})},t.dir_exists=r,t.dir_existsAsync=u,t.dir_files=function(t,e,r,n){return function t(e,r,n){var o,i=[];try{o=m.readdirSync(e)}catch(t){return console.error("<dir walk>",t),i}null==r&&(r=""),null==n&&(n={depth:0,maxdepth:1/0,directories:!1,symlinks:!1});var s=n.depth,c=n.patterns,u=n.excludes;n.depth++;for(var a,l=0,f=o.length;l<f;l++){a=o[l];var p=j(A.path_combine(e,a)),h=A.path_combine(r,a),g=!0;if(null!=p)if(p.isDirectory()){if(p.isSymbolicLink())continue;if(n.directories&&i.push(A.path_combine(e,a)+"/"),n.depth>=n.maxdepth)continue;var y=A.path_combine(r,a);if(c){for(var d=!1,v=0,b=c.length;v<b;v++){var _=c[v].rootCount-s,x=c[v].root;if(!_||_<s){d=!0;break}if(0===x.indexOf(y)){d=!0;break}w.logger(90).warn("<glob> not matched %s | %s",y,x)}if(!1===d)continue}w.logger(90).warn("<glob> match sub-",y),i=i.concat(t(A.path_combine(e,a),y,n))}else{if(c){g=!1;for(var v=0,b=c.length;v<b;v++)if(c[v].test(h)){g=!0;break}}if(g&&u)for(var v=0,b=u.length;v<b;v++)if(u[v].test(h)){g=!1;break}g&&i.push(h)}}return n.depth=s,i}(t,"",c.obj_extend(n,{depth:0,maxdepth:l(e),patterns:e,excludes:r}))},t.dir_filesAsync=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.pop(),o=e.shift(),i=e.shift(),s=e.shift();!function u(a,l,f,p,h,c){var g=f,y=p.maxdepth,d=p.patterns,n=p.excludes;function v(r,n){var t=A.path_combine(a,r);m.lstat(t,function(t,e){return t?n():e.isDirectory()?o(r,e,n):(i(r,h),void n())})}function o(t,e,r){if(e.isSymbolicLink())return r();if(p.directories&&h.push(A.path_combine(l,t)+"/"),y<=f)return r();var n=A.path_combine(l,t);if(d){for(var o=-1,i=d.length;++o<i;){var s=d[o].rootCount-g,c=d[o].root;if(!s||s<g)break;if(0===c.indexOf(n))break}if(i<=o)return r()}u(A.path_combine(a,t),n,f,p,h,r)}function i(t,e){var r=A.path_combine(l,t);d&&!1===b(r,d)||n&&!0===b(r,n)||e.push(r)}f++,m.readdir(a,function(t,e){if(t)return c(t,h);if(0===e.length)return c(null,h);for(var r,n,o=-1,i=e.length,s=(r=i,function(t){n=n||t,0==--r&&c(n,h)});++o<i;)v(e[o],s)})}(t,"",0,c.obj_extend(s,{maxdepth:l(o),patterns:o,excludes:i}),[],n)},t.dir_symlink=function(t,e){try{m.symlinkSync(t,e,"junction")}catch(t){w.logger.error("symlink: bold<%s>",t)}},t.dir_remove=function(t){if(!1===r(t))return!0;try{return function t(e){for(var r,n,o=m.readdirSync(e),i=o.length,s=-1;++s<i;)"."!==(r=o[s])&&".."!==r&&(n=e+"/"+r,m.lstatSync(n).isDirectory()?t(n):m.unlinkSync(n));m.rmdirSync(e)}(t),!0}catch(t){return!1}},t.dir_removeAsync=function(t,e){!function o(a,l){function f(r,n){m.lstat(r,function(t,e){t?n(t):e.isDirectory()?o(r,n):m.unlink(r,n)})}function p(){m.rmdir(a,l)}m.readdir(a,function(t,e){if(t)l(t);else{var r=e.length,n=-1;if(0!==r)for(var o,i,s,c,u=(i=r,s=p,function(t){c=c||t,--i<1&&s(c)});++n<r;)"."!==(o=e[n])&&".."!==o?f(A.path_combine(a,o),u):u();else p()}})}(t,e)},n(_)&&n(e.exports)?Object.assign(_,e.exports):_=e.exports}(),function(){var r={},t={exports:r};r.__esModule=!0,r.Repository={};var e=function(){function t(){}return t.register=function(t,e){r.Repository[t]=e},t.get=function(t){return r.Repository[t]},t}();function n(t){return null!=t&&"object"==typeof t&&t.constructor===Object}r.CustomTransport=e,n(D)&&n(t.exports)?Object.assign(D,t.exports):D=t.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var n=S;t.log_error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.apply(void 0,[r.red].concat(t))},t.log_info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.apply(void 0,[r.cyan].concat(t))};var r="[atma-io]";function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];e.unshift(t),n.logger.log.apply(n.logger,e)}function i(t){return null!=t&&"object"==typeof t&&t.constructor===Object}i(H)&&i(e.exports)?Object.assign(H,e.exports):H=e.exports}(),function(){var s={},t={exports:s};s.__esModule=!0;var c=require("fs"),u=_,n=H,a=S,l=C;s.FileTransport={save:function(t,e,r){if(u.dir_ensure(l.path_getDir(t)))n.log_error("file_save",t);else try{c.writeFileSync(t,e,r)}catch(t){n.log_error("file_save",t.toString())}},saveAsync:function(e,r,n,o){u.dir_ensureAsync(l.path_getDir(e),function(t){if(t)return o(t);c.writeFile(e,r,n||i,o)})},copy:function(t,e){if(!1!==c.existsSync(t))if(u.dir_ensure(l.path_getDir(e)))n.log_error("file_copy Target error",e);else try{!function(t,e){var r=new Buffer(65536),n=1,o=c.openSync(t,"r"),i=c.openSync(e,"w"),s=0;for(;0<n;)n=c.readSync(o,r,0,65536,s),c.writeSync(i,r,0,n),s+=n;c.closeSync(o),c.closeSync(i)}(t,e)}catch(t){n.log_error("file_copy",t.toString())}else n.log_error("file_copy 404",t)},copyAsync:function(n,o,i){function r(t){if(t)i(t);else{var e=c.createReadStream(n).on("error",function(t){a.logger.log("readstream error",n,t),i&&i(t),i=null}),r=c.createWriteStream(o).on("error",function(t){a.logger.log("writestream error",o,t),i&&i(t),i=null}).on("close",function(){i&&i(null),i=null});e.pipe(r)}}s.FileTransport.existsAsync(n,function(t,e){if(!0!==e)return i({code:404,message:n+" not exists."});u.dir_ensureAsync(l.path_getDir(o),r)})},exists:function(t){return c.existsSync(t)&&c.statSync(t).isFile()},existsAsync:function(t,n){c.stat(t,function(t,e){if(o.isNotFound(t))n(null,!1);else{var r=e&&e.isFile();n(t,r)}})},read:function(t,e){try{return c.readFileSync(t,e)}catch(t){n.log_error("file_read",t.toString())}return""},readAsync:function(t,e,r){c.readFile(t,{encoding:e},r)},remove:function(t){if(!1===s.FileTransport.exists(t))return!0;try{c.unlinkSync(t)}catch(t){return n.log_error("file_remove",t.toString()),!1}return!0},removeAsync:function(t,e){c.unlink(t,function(t){o.isNotFound(t)&&(t=null),e(t)})},rename:function(t,e){if(!1===s.FileTransport.exists(t))return n.log_error("file_rename 404",t),!1;try{c.renameSync(t,f(t)+e)}catch(t){return n.log_error("file_rename",t.toString()),!1}return!0},renameAsync:function(t,e,r){c.rename(t,f(t)+e,function(t){r(t,null==t)})}};var o,i={encoding:"utf8"};function f(t){return t.substring(0,t.lastIndexOf("/")+1)}function e(t){return null!=t&&"object"==typeof t&&t.constructor===Object}(o||(o={})).isNotFound=function(t){return null!=t&&(34===t.errno||-4058===t.errno||"ENOENT"===t.code)},e(h)&&e(t.exports)?Object.assign(h,t.exports):h=t.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var n=D,o=h,i=C;function s(t){var e=i.path_getProtocol(t);if(null==e||"file"===e)return o.FileTransport;var r=n.CustomTransport.get(e);if(null==r)throw new Error("Transport '"+e+"' is not supported or not installed");return r}function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.transport_save=function(t,e,r){s(t).save(t,e,r)},t.transport_saveAsync=function(t,e,r,n){s(t).saveAsync(t,e,r,n)},t.transport_copy=function(t,e){var r=s(t),n=s(e);if(r!==n){var o=r.read(t);n.save(e,o)}else r.copy(t,e)},t.transport_copyAsync=function(t,r,n){var e=s(t),o=s(r);e!==o?e.readAsync(t,null,function(t,e){t?n(t):o.saveAsync(r,e,null,n)}):e.copyAsync(t,r,n)},t.transport_exists=function(t){return s(t).exists(t)},t.transport_existsAsync=function(t,e){return s(t).existsAsync(t,e)},t.transport_read=function(t,e){return s(t).read(t,e)},t.transport_readAsync=function(t,e,r){s(t).readAsync(t,e,r)},t.transport_remove=function(t){return s(t).remove(t)},t.transport_removeAsync=function(t,e){s(t).removeAsync(t,e)},t.transport_rename=function(t,e){return s(t).rename(t,e)},t.transport_renameAsync=function(t,e,r){s(t).renameAsync(t,e,r)},r(P)&&r(e.exports)?Object.assign(P,e.exports):P=e.exports}(),function(){var t={},e={exports:t};function r(t,e){if(null==t)return t;for(var r=t.length,n=-1;++n<r&&!1!==e(t[n],n););return t}function o(t){return Array.isArray(t)}function n(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.__esModule=!0,t.arr_eachOrSingle=function(t,e){return!1===o(t)?(e(t),t):r(t,e)},t.arr_any=function(t,e){if(!1===o(t))return!1;for(var r=t.length,n=-1;++n<r;)if(e(t[n],n))return!0;return!1},t.arr_each=r,t.arr_find=function(t,e){if(null==t)return t;for(var r=t.length,n=-1;++n<r;)if(e(t[n],n))return t[n];return null},t.arr_isArray=o,n(s)&&n(e.exports)?Object.assign(s,e.exports):s=e.exports}(),function(){var t={},e={exports:t};function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.__esModule=!0,t.rgx_prepairString=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},r(c)&&r(e.exports)?Object.assign(c,e.exports):c=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var u,a=O,l=s,f=S,i=c;function g(t,e){var r=a.File.middleware[t];if(null==r)try{var n=require(t);n&&n.register&&n.register(f.io),null==(r=a.File.middleware[t])&&(r=n)}catch(t){}return null==r?(f.logger.error("Middleware is not installed",t),null):"object"==typeof r&&(null==r.name&&(r.name=t),null!=e&&null==r[e]&&null==r[e+"Async"])?(f.logger.error("Middleware not defined for action",e,t),null):r}function p(t){if("/"===t[0]){var e=t.substring(1),r=e.lastIndexOf("/"),n=e.substring(r+1);return e=e.substring(0,r),new RegExp(e,n)}var o=i.rgx_prepairString(t);return new RegExp("\\."+o+"($|\\?|#)")}function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.FileHookRegistration={registerMiddlewares:function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null);var n,o,i=a.File.getHookHandler();for(var s in t){var c=t[s];!1!==l.arr_isArray(c)?(e&&(n=i,void 0,o=p(s),n.unregisterByRegexp(o)),l.arr_each(c,u.registerHookDelegate(i,s,r))):f.logger.warn("Middleware list for %s is not an array",s)}},ensureMiddleware:function(t,e){return g(t,e)}},function(t){function h(t,e,r,n,o,i){if(null!=e){if(null!=i&&null!=n&&"string"!=typeof e){var s=i[n];s&&e.setOptions&&e.setOptions(s)}"string"!=typeof e&&e.setIo&&e.setIo(f.io);var c=p(r);t.register(c,o,e)}}(u||(u={})).registerHookDelegate=function(e,r,n){return function(t){!function(t,e,r,n){if("string"==typeof r)return o=t,i=e,s=n,c=/^(.+?)(:(read|write))?$/.exec(r),u=c[1],a=c[3],l=g(u,a),h(o,l,i,u,a,s);var o,i,s,c,u,a,l;if(Array.isArray(r)){var f=r[0],p=r[1];return h(t,f,e,null,p,n)}throw Error("Invalid handler Definition in registerHook")}(e,r,t,n)}}}(),r(k)&&r(e.exports)?Object.assign(k,e.exports):k=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var s,i,r=require("atma-utils"),c=C,u=P,a=S,l=H,n=M,f=j,p=F,h=k,g=D,y={},d=!0,o=function(){function o(t,e){if(this.uri=c.path_getUri(t),m(t=_(this.uri),e))return y[t];if(this.__proto__===o.prototype){var r=e&&e.factory||i,n=r&&r.resolveHandler(this.uri);if(null!=n)return new n(this.uri,e)}return y[t]=this}return o.prototype.read=function(t){if(null!=this.content)return this.content;var e=x(t),r=_(this.uri);return this.content=u.transport_read(r,e.encoding),w("read",this,e,t),this.content},o.read=function(t,e){return new o(t).read(e)},o.prototype.readAsync=function(s){return v(this,function(r,n,t){if(null==n.content){var o=x(s);u.transport_readAsync(t,o.encoding,function(t,e){if(t)return r.reject(t);n.content=e,w("read",n,o,s,i)})}else r.resolve(n.content,n);function i(t){if(t)return r.reject(t);r.resolve(n.content,n)}},function(t,e){m(e)&&delete y[e]})},o.readAsync=function(t,e){return new o(t).readAsync(e)},o.prototype.write=function(t,e){if(null!=t&&(this.content=t),null==this.content)return a.logger.error("io.file.write: Content is empty"),this;var r=_(this.uri),n=x(e);return w("write",this,n,e),u.transport_save(r,this.content,n),this},o.write=function(t,e,r){return new o(t).write(e,r)},o.prototype.writeAsync=function(o,i){return v(this,function(t,e,r){if(e.content=o=o||e.content,null!=o){var n=x(i);w("write",e,n,i,function(){u.transport_saveAsync(r,e.content,n,b(t))})}else t.reject(Error("Content is undefined"))})},o.writeAsync=function(t,e,r){return new o(t).writeAsync(e,r)},o.prototype.copyTo=function(t){var e=_(this.uri),r=c.path_getUri(t),n=r.file?_(r):_(r.combine(this.uri.file)),o=e.substr(-25).replace(/([^\/]+)$/,"green<bold<$1>>").color,i=n.substr(-25).replace(/([^\/]+)$/,"green<bold<$1>>").color;return l.log_info("copy:",o,i),u.transport_copy(e,n),this},o.copyTo=function(t,e){return new o(t).copyTo(e)},o.prototype.copyToAsync=function(n){return v(this,function(t,e,r){u.transport_copyAsync(r,_(c.path_getUri(n)),b(t))})},o.copyToAsync=function(t,e){return new o(t).copyToAsync(e)},o.prototype.exists=function(){return u.transport_exists(_(this.uri))},o.exists=function(t){return new o(t).exists()},o.prototype.existsAsync=function(){return v(this,function(t,e,r){u.transport_existsAsync(r,b(t))})},o.existsAsync=function(t){return new o(t).existsAsync()},o.prototype.rename=function(t){return u.transport_rename(_(this.uri),t)},o.rename=function(t,e){return new o(t).rename(e)},o.prototype.renameAsync=function(n){return v(this,function(t,e,r){u.transport_renameAsync(r,n,b(t))})},o.renameAsync=function(t,e){return new o(t).renameAsync(e)},o.prototype.remove=function(){return u.transport_remove(_(this.uri))},o.remove=function(t){return new o(t).remove()},o.prototype.removeAsync=function(){return v(this,function(t,e,r){u.transport_removeAsync(r,b(t))})},o.removeAsync=function(t){return new o(t).removeAsync()},o.prototype.replace=function(t,e,r){var n=this.read(r);return"string"!=typeof n&&(n=n.toString()),n=n.replace(t,e),this.write(n),n},o.replace=function(t,e,r,n){return new o(t).replace(e,r,n)},o.prototype.replaceAsync=function(n,o,t){return v(this,function(e,r){r.readAsync(t).fail(e.rejectDelegate()).done(function(t){t=t.replace(n,o),r.writeAsync(t).fail(e.rejectDelegate()).done(function(){e.resolve(null,t)})})})},o.replaceAsync=function(t,e,r,n){return new o(t).replaceAsync(e,r,n)},o.prototype.watch=function(t){p.Watcher.watch(_(this.uri),t)},o.watch=function(t,e){new o(t).watch(e)},o.prototype.unwatch=function(t){p.Watcher.unwatch(_(this.uri),t)},o.unwatch=function(t,e){new o(t).unwatch(e)},o.prototype.stats=function(){return n.fs_getStat(_(this.uri))},o.stats=function(t){return new o(t).stats()},o.clearCache=function(t){var e;!1!==d&&(0!==arguments.length?null!=t&&("string"==typeof t?(e=_(c.path_getUri(t)),!1===y.hasOwnProperty(e)&&47===t.charCodeAt(0)&&(e=r.class_Uri.combine(f.Env.cwd,t))):t.uri?e=_(t.uri):t.toLocalFile&&(e=_(t)),!1!==y.hasOwnProperty(e)?delete y[e]:a.logger.log("io.File - not in cache -",e)):y={})},o.disableCache=function(){d=!(y={})},o.enableCache=function(){d=!0},o.registerFactory=function(t){i=t},o.getFactory=function(){return i},o.registerHookHandler=function(t){s=t},o.getHookHandler=function(){return s},o.registerTransport=function(t,e){g.CustomTransport.register(t,e)},Object.defineProperty(o,"Factory",{get:function(){return i},enumerable:!0,configurable:!0}),Object.defineProperty(o,"Middleware",{get:function(){return s},enumerable:!0,configurable:!0}),o.processHooks=function(t,e,r,n){w(t,e,null,r,n)},o.registerExtensions=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),h.FileHookRegistration.registerMiddlewares(t,e,r)},o.setMiddlewares=function(t,e){void 0===e&&(e=null),h.FileHookRegistration.registerMiddlewares(t,!0,e)},o.middleware={},o}();function v(t,e,r){var n=new a.Class.Deferred,o=_(t.uri);return null!=r&&n.fail(function(){r(t,o)}),e(n,t,o),n}function b(n){return function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t?n.reject(t):n.resolve.apply(n,e)}}function _(t){return null==t.protocol||"file"===t.protocol?t.toLocalFile():t.toString()}function x(t,e){var r=e||{encoding:"utf8",skipHooks:!1,hooks:null};if(null==t)return r;switch(typeof t){case"string":r.encoding=t;break;case"object":t.hasOwnProperty("encoding")&&(r.encoding=t.encoding),t.hasOwnProperty("skipHooks")&&(r.skipHooks=t.skipHooks),t.hasOwnProperty("hooks")&&(r.hooks=t.hooks)}return"buffer"===r.encoding&&(r.encoding=null),r}function w(t,e,r,n,o){var i=s;null==r||null!=(i=r.hooks||i)&&!0!==r.skipHooks?o?i.triggerAsync(t,e,n,o):i.trigger(t,e,n):o&&o()}function m(t,e){return!1!==d&&((null==e||!1!==e.cached)&&(y.hasOwnProperty(t)&&null!=y[t]))}function A(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.File=o,A(O)&&A(e.exports)?Object.assign(O,e.exports):O=e.exports}(),function(){var n,t={},e={exports:t},r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(s=(i<3?o(s):3<i?o(e,r,s):o(e,r))||s);return 3<i&&s&&Object.defineProperty(e,r,s),s};t.__esModule=!0;var i,s,c=S;t.cli_prompt=function(t,e){u.create(new a(t,e))},t.cli_confirm=function(t,e){u.create(new l(t+" (y): ",e))};var u=function(){function r(){this.collection=[],this.busy=!1}return r.create=function(t){var e;null==i&&(e=require("readline"),i=e.createInterface({input:process.stdin,output:process.stdout}),s=new r),s.collection.push(t),s.process()},r.prototype.process=function(){this.busy||0!==this.collection.length&&(this.busy=!0,this.collection.shift().process().always(this.next))},r.prototype.next=function(){this.busy=!1,this.process()},o([c.Class.deco.self],r.prototype,"process"),o([c.Class.deco.self],r.prototype,"next"),r}(),a=function(n){function t(t,e){void 0===t&&(t=">");var r=n.call(this)||this;return r.text=t,r.callback=e,r}return r(t,n),t.prototype.process=function(){return i.resume(),process.stdout.write("\n"),i.question(this.text,this.onInput.bind(this)),this},t.prototype.onInput=function(t){i.pause(),this.callback&&this.callback(t),this.resolve(t)},t}(c.Class.Deferred),l=function(o){function t(t,e){var r=o.call(this,t,e)||this,n=r.callback;return r.callback=function(t){n(/^y|yes$/gi.test(t))},r}return r(t,o),t.prototype.onInput=function(t){t?o.prototype.onInput.call(this,t):this.process()},t}(a);function f(t){return null!=t&&"object"==typeof t&&t.constructor===Object}f(v)&&f(e.exports)?Object.assign(v,e.exports):v=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var i,n={path:null,file:null,line:null};function s(t){")"===t[t.length-1]&&(t=t.substr(t.indexOf("(")+1,t.lastIndexOf(")")-1));var e=/^(.+):(\d+):(\d)/.exec(t);if(null==e)return null;var r=n.path=e[1];return n.file=r.substring(r.search(/[\/\\][^\/\\]+$/)+1),n.line=e[2],null==i&&(i=n.file),n}function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.stack_formatCaller=function(t){void 0===t&&(t="P:L");for(var e,r=(new Error).stack.split("\n").splice(1),n=r.length,o=-1;++o<n&&(null==(e=s(r[o]))||null==i||e.file===i););return null==e||o===n?"":t.replace("P",e.path).replace("F",e.file).replace("L",e.line)},r(x)&&r(e.exports)?Object.assign(x,e.exports):x=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var p=S,r=require("atma-utils"),s=_,c=b,h=O,g=C,y=v,u=require("fs"),n=F,a=x,o=function(){function i(t){if(t instanceof i)return t;null!=t&&"/"!==t?("string"==typeof t&&"/"!==t[t.length-1]&&(p.logger.warn("@ directory path should end with slash. Adding...",t),!1===/\.\w+$/.test(t)&&(t+="/")),this.uri=new r.class_Uri(t),this.uri.isRelative()&&p.io.env&&(this.uri=p.io.env.currentDir.combine(this.uri)),delete this.uri.file):this.uri=p.io.env.currentDir}return i.prototype.exists=function(){return s.dir_exists(this.uri.toLocalDir())},i.exists=function(t){return new i(t).exists()},i.prototype.existsAsync=function(){return l(this,function(t,e,r){s.dir_existsAsync(r,f(t))})},i.existsAsync=function(t){return new i(t).existsAsync()},i.prototype.ensure=function(){return s.dir_ensure(this.uri.toLocalDir()),this},i.ensure=function(t){return new i(t).ensure()},i.prototype.ensureAsync=function(){return l(this,function(t,e,r){s.dir_ensureAsync(r,f(t,e))})},i.ensureAsync=function(t){return new i(t).ensureAsync()},i.prototype.readFiles=function(t,e){var r=this,n=c.glob_parsePatterns(t),o=c.glob_parsePatterns(e),i=this.files=s.dir_files(this.uri.toLocalDir(),n,o).map(function(t){return new h.File(r.uri.combine(t))});return Object.defineProperty(i,"files",{get:function(){return console.log("Warn: obsolete. io.Directory::readFiles returns now the array of files"),a.stack_formatCaller(),i}}),i},i.readFiles=function(t,e,r){return new i(t).readFiles(e,r)},i.prototype.read=function(t,e){var r=this,n=c.glob_parsePatterns(t),o=c.glob_parsePatterns(e);return s.dir_files(this.uri.toLocalDir(),n,o,{directories:!0}).map(function(t){var e=r.uri.combine(t);return"/"===t[t.length-1]?new i(e):new h.File(e)})},i.read=function(t,e,r){return new i(t).read(e,r)},i.prototype.readFilesAsync=function(t,e){var o=c.glob_parsePatterns(t);c.glob_parsePatterns(e);return l(this,function(r,n,t){s.dir_filesAsync(t,o,e,function(t,e){t?r.reject(t):(n.files=e.map(function(t){return new h.File(n.uri.combine(t))}),r.resolve(n))})})},i.readFilesAsync=function(t,e,r){return new i(t).readFilesAsync(e,r)},i.prototype.readAsync=function(t,e){var r=c.glob_parsePatterns(t);c.glob_parsePatterns(e);return l(this,function(n,o,t){s.dir_filesAsync(t,r,e,{directories:!0},function(t,e){if(t)n.reject(t);else{var r=e.map(function(t){var e=o.uri.combine(t);return"/"===t[t.length-1]?new i(e):new h.File(e)});n.resolve(r,o)}})})},i.readAsync=function(t,e,r){return new i(t).readAsync(e,r)},i.prototype.copyTo=function(t,i){void 0===i&&(i={verbose:!1});var s=new p.Class.Deferred;!1===Array.isArray(this.files)&&this.readFiles();var c=this.uri,u=g.path_getUri(t),a=this.files,l=a.length,f=-1;return function e(){if(++f>=l)s.resolve();else{var r,n=a[f],t=n.uri.toRelativeString(c);if(r=u.combine(t),!0!==i.verbose&&h.File.exists(r)){var o="File already exists: "+t+". Replace? ";y.cli_prompt(o,function(t){t&&n.copyTo(r),e()})}else n.copyTo(r),e()}}(),s},i.copyTo=function(t,e,r){return void 0===r&&(r={verbose:!1}),new i(t).copyTo(e,r)},i.prototype.copyToAsync=function(t,c){void 0===c&&(c={verbose:!1});var e=new p.Class.Deferred;if(!1===Array.isArray(this.files)){var r=this;return this.readFilesAsync().done(function(){r.copyToAsync(t,c).done(e.resolveDelegate()).fail(e.rejectDelegate())}).fail(e.rejectDelegate()),e}for(var u=this.uri,a=g.path_getUri(t),l=this.files,n=l.length,o=-1,i=new p.Class.Await;++o<n;)s(o,i.delegate(null));function s(t,e){var r,n=l[t],o=n.uri.toRelativeString(u);if(r=a.combine(o),!0!==c.verbose&&h.File.exists(r)){var i="File already exists: "+o+". Replace? ";y.cli_prompt(i,function(t){!0===t&&n.copyToAsync(r).done(s).fail(e)})}else n.copyToAsync(r).done(s).fail(e);function s(){e()}}return i.done(e.resolveDelegate()).fail(e.rejectDelegate()),e},i.copyToAsync=function(t,e,r){return void 0===r&&(r={verbose:!1}),new i(t).copyToAsync(e,r)},i.prototype.getName=function(){return/([^\/]+)\/?$/.exec(this.uri.path)[1]},i.prototype.rename=function(t){if(t){var e=this.uri.toLocalFile(),r=e.replace(/[^\/]+\/?$/g,t);p.logger.log("<dir:rename>",e,r),u.renameSync(e,r)}else p.logger.error("<dir:rename> New Name is not defined")},i.rename=function(t,e){new i(t).rename(e)},i.prototype.renameAsync=function(o){return l(this,function(t,e,r){if(o){var n=r.replace(/[^\/]+\/?$/g,o);u.rename(r,n,f(t))}else t.reject("Name is undefined")})},i.renameAsync=function(t,e){return new i(t).renameAsync(e)},i.prototype.remove=function(){s.dir_remove(this.uri.toLocalDir())},i.remove=function(t){new i(t).remove()},i.prototype.removeAsync=function(){return l(this,function(t,e,r){s.dir_removeAsync(r,f(t))})},i.removeAsync=function(t){return new i(t).removeAsync()},i.prototype.watch=function(t){n.Watcher.watch(this.uri.toLocalFile(),t)},i.watch=function(t,e){new i(t).watch(e)},i.prototype.unwatch=function(t){n.Watcher.unwatch(this.uri.toLocalFile(),t)},i.unwatch=function(t,e){new i(t).unwatch(e)},i.symlink=s.dir_symlink,i}();function l(t,e){var r=new p.Class.Deferred;return e(r,t,t.uri.toLocalDir()),r}function f(n){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];return function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t?n.reject(t):n.resolve.apply(n,o.concat(e))}}function i(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.Directory=o,i(d)&&i(e.exports)?Object.assign(d,e.exports):d=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var o=b,i=d;function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.ExportsGlob={matchPath:o.glob_matchPath,readFiles:function(t){var e=o.glob_getStrictPath(t),r=o.glob_getRelativePath(t);return new i.Directory(e).readFiles(r)},read:function(t){var e=o.glob_getStrictPath(t),r=o.glob_getRelativePath(t);return new i.Directory(e).read(r)},readAsync:function(t,r){var e=o.glob_getStrictPath(t),n=o.glob_getRelativePath(t);return new i.Directory(e).readAsync(n).done(function(t,e){r(null,t,e)}).fail(function(t){r(t)})}},r(n)&&r(e.exports)?Object.assign(n,e.exports):n=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var r=O;function n(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.setSettings=function(t){t.extensions&&r.File.registerExtensions(t.extensions,!0)},n(o)&&n(e.exports)?Object.assign(o,e.exports):o=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var s=S,r=function(){function t(){this.handlers=[]}return t.prototype.registerHandler=function(t,e){!function(t){var e="function"==typeof t?t.prototype:t;for(var r in e){var n=e[r];if("function"==typeof n&&-1===r.indexOf("Async")){var o=r+"Async";null==e[o]&&(e[o]=i(n,r))}}function i(o,t){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new s.Class.Deferred;try{var n=o.apply(this,t);return r.resolve(n)}catch(t){return r.reject(t)}}}}(e),this.handlers.push({handler:e,regexp:t})},t.prototype.unregisterHandler=function(t,e){for(var r,n=t.toString(),o=this.handlers.length,i=-1;++i<o;)if((r=this.handlers[i]).regexp.toString()===n)if(void 0!==e){if(e===r)return void this.handlers.splice(i,1)}else this.handlers.splice(i,1),i--,o--},t.prototype.resolveHandler=function(t){var e=t.toString(),r=function(t,e){var r,n=t.length,o=-1;for(;++o<n;)if(i((r=t[o]).regexp,e))return r;return null}(this.handlers,e);return r?r.handler:null},t}();function i(t,e){return Array.isArray(t)?t.some(function(t){return i(t,e)}):(t.lastIndex=0,t.test(e))}function n(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.FileFactory=r,n(a)&&n(e.exports)?Object.assign(a,e.exports):a=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var n=O,r=S,s=k,c=function(){function t(t,e,r,n){this.regexp=t,this.method=e,this.handler=r,this.zIndex=n}return t.prototype.run=function(t,e,r){!1!==this.canHandle(e.uri.toString(),t)&&("function"==typeof this.handler?this.handler(e,r):this.handler[t]&&this.handler[t](e,r))},t.prototype.runAsync=function(t,e,r,n){if(t===this.method)if(!1!==this.regexp.test(e.uri.toString())){var o=this.handler;if("function"==typeof o)o(e,r),n();else{if(o[t+"Async"])return void o[t+"Async"](e,r,n);if(o[t])try{o[t](e,r)}catch(t){return void n(t)}n()}}else n();else n()},t.prototype.canHandle=function(t,e){return(null==e||e===this.method)&&this.regexp.test(t)},t}();t.HookRunner=c;var o=function(){function t(){this.hooks=[]}return t.prototype.register=function(t,e,r,n){var o;if(t instanceof RegExp?o=t:(o=t.regexp,e=t.method,r=t.handler,n=t.zIndex),"string"==typeof r){var i=s.FileHookRegistration.ensureMiddleware(r,e);if(null==i)return this;r=i}return!1===this.contains(e,r,o)&&this.hooks.push(new c(o,e,r,n||0)),this},t.prototype.contains=function(t,e,r){for(var n=r&&r.toString()||null,o=this.hooks.length,i=-1;++i<o;){var s=this.hooks[i];if(s.method===t&&(s.handler===e&&(null==n||n===s.regexp.toString())))return!0}return!1},t.prototype.unregister=function(e,r){"string"==typeof r&&(r=n.File.middleware[r]),this.hooks=this.hooks.filter(function(t){return!(t.method===e&&t.handler===r)})},t.prototype.unregisterByRegexp=function(t){for(var e=t.toString(),r=this.hooks.length,n=-1;++n<r;){this.hooks[n].regexp.toString()===e&&(this.hooks.splice(n,1),n--,r--)}},t.prototype.trigger=function(e,r,n){this.getHooksForPath(r.uri.toString(),e).forEach(function(t){t.run(e,r,n)})},t.prototype.triggerAsync=function(t,e,r,n){var o=e.uri.toString(),i=this.getHooksForPath(o,t);new u(i).process(t,e,r,n)},t.prototype.clear=function(){return this.hooks=[],this},t.prototype.getHooksForPath=function(e,r){return this.hooks.filter(function(t){return t.canHandle(e,r)}).sort(function(t,e){return t.zIndex===e.zIndex?0:t.zIndex<e.zIndex?1:-1})},t}();t.FileHooks=o;var u=r.Class.Collection(c,{Base:r.Class.Serializable,index:-1,cb:null,method:null,file:null,config:null,process:function(t,e,r,n){this.index=-1,this.cb=n,this.method=t,this.file=e,this.config=r,this.next()},Self:{next:function(t){if(t)this.cb(t);else if(++this.index>=this.length)this.cb();else{var e=this[this.index];if("function"!=typeof e.handler){var r=e.handler.name;if(r)for(var n=this.index-1;-1<n;n--)if(r===this[n].handler.name)return void this.next()}e.runAsync(this.method,this.file,this.config,this.next)}}}});function i(t){return null!=t&&"object"==typeof t&&t.constructor===Object}i(l)&&i(e.exports)?Object.assign(l,e.exports):l=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var n=S,o=j;function r(t){return null!=t&&"object"==typeof t&&t.constructor===Object}t.JsonMiddleware={read:function(t){if("string"==typeof t.content)try{t.content=JSON.parse(t.content)}catch(t){n.logger.error("<json:parser>",t)}},write:function(t,e){if(null!=t.content&&"object"==typeof t.content)try{var r=e&&e.minify?null:4;t.content=JSON.stringify(t.content,null,r).replace(/\n/g,o.Env.newLine)}catch(t){n.logger.error("<json:stringify> ",t)}}},r(p)&&r(e.exports)?Object.assign(p,e.exports):p=e.exports}(),function(){var t={},e={exports:t};t.__esModule=!0;var r=O,n=a,o=l,i=p,s=S;if(s.global.io&&s.global.io.File&&"function"==typeof s.global.io.File.getFactory){var c=s.global.io.File;r.File.registerFactory(c.getFactory()),r.File.registerHookHandler(c.getHookHandler()),r.File.middleware=c.middleware}else r.File.registerFactory(new n.FileFactory),r.File.registerHookHandler(new o.FileHooks),r.File.registerExtensions({json:[[i.JsonMiddleware,"read"],[i.JsonMiddleware,"write"]]});function u(t){return null!=t&&"object"==typeof t&&t.constructor===Object}u(f)&&u(e.exports)?Object.assign(f,e.exports):f=e.exports}();var t=S,e=j,r=F,u=n,g=O,y=d,w=o,m=require("atma-utils");t.io.env=e.Env,t.io.watcher=r.Watcher,t.io.glob=u.ExportsGlob,t.io.File=g.File,t.io.Uri=m.class_Uri,t.io.Directory=y.Directory,t.io.settings=w.setSettings,null==t.global.io&&(t.global.io=t.io),module.exports=t.io}();